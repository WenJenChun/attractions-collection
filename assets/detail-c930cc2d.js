import"./main-5aeeef5c.js";const r=document.querySelector("#placeName"),u=document.querySelector("#placeDetail"),n=location.href.split("=")[1],t=document.querySelector("#collectBtn"),d=localStorage.getItem("userId");let l,c;const o="https://attractions-api-jhwt.onrender.com";function g(){return axios.get(o+"/collections?userId="+d).then(function(e){l=e.data})}async function m(){await g(),console.log(l),axios.get(o+"/views/"+n).then(function(e){const a=e.data;r.textContent=a.name,u.textContent=a.description;const s=l.find(i=>i.viewId===n);s?(c=s.id,t.textContent="已收藏",console.log("已收藏，id="+c)):(t.textContent="尚未收藏",console.log("還沒收"))})}m();t.addEventListener("click",function(){localStorage.getItem("token")==null&&(alert("請先登入!"),window.location.href="/login.html"),t.textContent=="尚未收藏"?(t.textContent="已收藏!",axios.post(o+"/collections",{viewId:n,userId:localStorage.getItem("userId")}).then(function(e){console.log("response 回傳"),console.log(e.data)}).catch(function(e){console.log("錯誤訊息"),console.log(e.response)})):(t.textContent="尚未收藏",axios.delete(`${o}/collections/${c}`).then(function(e){console.log("response 回傳"),console.log(e.data)}).catch(function(e){console.log("錯誤訊息"),console.log(e.response)}))});localStorage.getItem("token")==null?console.log("還沒登入"):(console.log("已登入"),localStorage.getItem("role")=="admin"?navBar.innerHTML=` 
    <a class="me-3" href="/backboard.html">後台</a>
    <a class="me-3" href="/collections.html">我的收藏</a>
    <input id="logoutBtn" type="button" class="btn btn-secondary text-white " value="登出">
    `:navBar.innerHTML=` 
    <a class="me-3" href="/collections.html">我的收藏</a>
    <input id="logoutBtn" type="button" class="btn btn-secondary text-white " value="登出">
    `,document.querySelector("#logoutBtn").addEventListener("click",function(){localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("userId"),location.reload(),window.location.href="/index.html"}));
